<?phpif (!defined('BASEPATH')) {    exit('No direct script access allowed');}class Blog_model extends CI_Model {     public function __construct() {            parent::__construct();            $this->db = $this->load->database('default',TRUE);            }            function get_page($where = '') {        return $this->db->query("SELECT * FROM page $where;");    }    function get_post($where = '') {        return $this->db->query("SELECT * FROM post $where;");    }    function get_post_reaction($where = '') {        return $this->db->query("SELECT * FROM post_reaction $where;");    }    function get_member_setting($where = '') {        return $this->db->query("SELECT * FROM member_setting $where;");    }    function get_member_follow($where = '') {        return $this->db->query("SELECT * FROM member_follow $where;");    }    function get_member_following($where = '') {        $query = $this->db->query("SELECT count(*) AS num_row FROM member_follow $where");        return $query->row()->num_row;    }    function get_member_followers($where = '') {        $query = $this->db->query("SELECT count(*) AS num_row FROM member_follow $where");        return $query->row()->num_row;    }    function get_post_category($where = '') {        return $this->db->query("SELECT * FROM post_category $where;");    }    function get_menu($where = '') {        return $this->db->query("SELECT * FROM menu $where;");    }    function get_tags($where = '') {        return $this->db->query("SELECT * FROM tags $where;");    }    function get_setting() {        return $this->db->query("SELECT * FROM setting;");    }    function get_contact($where = '') {        return $this->db->query("SELECT * FROM contact $where;");    }    function get_subscribe($where = '') {        return $this->db->query("SELECT * FROM subscribe $where;");    }    function search($keyword) {        $this->db->like('title', $keyword);        $query = $this->db->get('post');        return $query->result();    }    function find_tags($keyword) {        $this->db->like('tag', $keyword);        $query = $this->db->get('post');        return $query->result();    }    function get_trending($limit, $start) {        $this->db->SELECT('*');        $this->db->FROM('post');        $this->db->where('active', 'Y');        $this->db->order_by('hits', 'DESC');        $this->db->limit($limit, $start);        $query = $this->db->get();        return $query->result();    }    function get_total_trending() {        $this->db->SELECT('count(*) AS num_row');        $this->db->FROM('post');        $this->db->where('active', 'Y');        $this->db->limit(1);        $query = $this->db->get();        return $query->row()->num_row;    }    function top_hit_post() {        $this->db->SELECT('*');        $this->db->FROM('post');        $this->db->where('active', 'Y');        $this->db->order_by('hits', 'DESC');        $this->db->limit(20);        return $this->db->get();    }    function delete_checked($message_ids) {        $this->db                ->where_in('id', $message_ids)                ->where('recipient', $this->users->get_user_id())                ->delete('post');        return $this->db->affected_rows() > 0;    }    public function load_more_home($page) {        $offset = 12 * $page;        $limit = 12;        $sql = "SELECT * FROM post WHERE active='Y' ORDER BY date DESC LIMIT $offset ,$limit";        $result = $this->db->query($sql)->result();        return $result;    }    public function load_more_category($page = "") {        $offset = 12 * $page;        $limit = 12;        $sql = "SELECT * FROM post WHERE category='$page' AND active='Y' ORDER BY date DESC LIMIT $offset ,$limit";        $result = $this->db->query($sql)->result();        return $result;    }    function get_post_by_category($where = '', $limit, $start) {        $this->db->select('*');        $this->db->from('post');        if ($where) {            $this->db->where('category', $where);            $this->db->where('active', 'Y');        }        $this->db->limit($limit, $start);        $query = $this->db->get();        return $query->result();    }    function get_post_by_editorial_pick($where = '', $limit, $start) {        $this->db->select('*');        $this->db->from('post');        if ($where) {            $this->db->where('active', 'Y');            $this->db->where('editorial_pick', 'Y');        }        $this->db->limit($limit, $start);        $query = $this->db->get();        return $query->result();    }    function get_post_by_top_stories($where = '', $limit, $start) {        $this->db->select('*');        $this->db->from('post');        if ($where) {            $this->db->where('active', 'Y');            $this->db->order_by('hits', 'DESC');        }        $this->db->limit($limit, $start);        $query = $this->db->get();        return $query->result();    }    function get_total_category($category = "") {        $this->db->SELECT('count(*) AS num_row');        $this->db->FROM('post');        if ($category) {            $this->db->where('category', $category);        }        $this->db->limit(1);        $query = $this->db->get();        return $query->row()->num_row;    }    public function get_all_content($start, $content_per_page) {        $sql = "SELECT * FROM  post WHERE active='Y' ORDER BY date DESC LIMIT $start,$content_per_page";        $result = $this->db->query($sql)->result();        return $result;    }    function get_post_by_user($where = '', $limit, $start) {        $this->db->select('*');        $this->db->from('post');        $this->db->where('id_reg', $where);        //$this->db->where('active', 'Y');        $this->db->limit($limit, $start);        $query = $this->db->get();        return $query->result();    }    function get_total_article_user($id_reg = "") {        $this->db->SELECT('count(*) AS num_row');        $this->db->FROM('post');        $this->db->where('id_reg', $id_reg);        $this->db->limit(1);        $query = $this->db->get();        return $query->row()->num_row;    }    function get_cat_scifi() {        $query = $this->db->query("SELECT count(*) AS num_row FROM post WHERE category='10'");        return $query->row()->num_row;    }    function get_cat_sport() {        $query = $this->db->query("SELECT count(*) AS num_row FROM post WHERE category='12'");        return $query->row()->num_row;    }    function get_cat_video() {        $query = $this->db->query("SELECT count(*) AS num_row FROM post WHERE category='16'");        return $query->row()->num_row;    }    function get_cat_automotive() {        $query = $this->db->query("SELECT count(*) AS num_row FROM post WHERE category='13'");        return $query->row()->num_row;    }    function get_cat_tech() {        $query = $this->db->query("SELECT count(*) AS num_row FROM post WHERE category='11'");        return $query->row()->num_row;    }        function insert_data($table, $data) {        return $this->db->insert($table, $data);    }    function update_data($table, $data, $where) {        return $this->db->update($table, $data, $where);    }    function delete_data($table, $where) {        return $this->db->delete($table, $where);    }}